<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="account">
	<insert id="accountSave">
		<![CDATA[
			INSERT INTO SC_ACCOUNT
			(
				account_date,
				use_detail,
				cash,
				card,
				classification,
				memo,
				id
			)	
			VALUES
			(
				#{account_date},
				#{use_detail},
				#{cash},
				#{card},
				#{classification},
				#{memo},
				#{id}
			)
		]]>
	</insert>
	
	<select id="accountList" resultType="second.account.dto.AccountDTO">
		<![CDATA[
			SELECT
				account_date,
				use_detail,
				cash,
				card,
				classification,
				memo,
				id
			FROM
				sc_account
			WHERE
				id = #{id}
			ORDER BY account_date desc
		]]>
	</select>
	
	<select id="accountListSum" resultType="second.account.dto.AccountDTO">
		<![CDATA[
			SELECT
				classification,sum(cash+card) money
			FROM 
				sc_account
			WHERE
				id=#{id}
			GROUP BY classification
			ORDER BY classification
		]]>
	</select>
	
	<insert id="accountIncomeSave">
		<![CDATA[
			INSERT INTO SC_ACCOUNTINCOME
			(
				idx,
				salary,
				income,
				id,
				income_date
			)
			VALUES
			(
				seq_sc_accountincom_idx.nextval,
				#{salary},
				#{income},
				#{id},
				#{income_date}
			)
		]]>
	</insert>
	
	<select id="accountIncomeList" resultType="second.account.dto.AccountIncomeVO">
		<![CDATA[
			SELECT * FROM SC_ACCOUNTINCOME
		]]>
	</select>
	
	<select id="monthIncome" resultType="string">
		<![CDATA[
			SELECT
				sum(salary+income) monthIncome
			FROM
		 		SC_ACCOUNTINCOME
		 	WHERE
		 		income_date like #{income_date} and id = #{id}
		 	GROUP BY id
		]]>
	</select>
	
	<select id="monthSpend" resultType="second.account.dto.AccountDTO">
		<![CDATA[
			SELECT
				sum(cash) cash,
				sum(card) card,
				sum(cash+card) money
			FROM
				SC_ACCOUNT
			WHERE
				account_date like #{account_date} and id = #{id}
		]]>
	</select>
</mapper>